<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<body>
<div th:fragment="content">

  <!-- 상단 요약 카드 -->
  <div class="row g-3">
    <div class="col-12 col-lg-6">
      <div class="card">
        <div class="card-body">
          <div class="mb-2 text-muted">사용자 ID</div>
          <div class="fs-5 fw-semibold" th:text="${userId}">1</div>

          <hr/>

          <!-- 나중에 실제 값 바인딩 -->
          <dl class="row mb-0">
            <dt class="col-4">이메일</dt><dd class="col-8">admin@local.com</dd>
            <dt class="col-4">권한</dt><dd class="col-8"><span class="badge text-bg-dark">ADMIN</span></dd>
            <dt class="col-4">잠금</dt><dd class="col-8"><span class="badge text-bg-success">정상</span></dd>
            <dt class="col-4">실패횟수</dt><dd class="col-8">0</dd>
          </dl>
        </div>
      </div>
    </div>

    <!-- 액션 영역 -->
    <div class="col-12 col-lg-6">
      <div class="card border-0">
        <div class="card-body p-0 d-grid gap-2">

          <!-- 권한 변경 -->
          <div class="card">
            <div class="card-body">
              <div class="fw-semibold mb-2">권한 변경</div>
              <form method="post" th:action="@{|/admin/users/${userId}/role|}" class="row g-2 align-items-end">
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                <div class="col-8">
                  <label class="form-label">Role</label>
                  <select class="form-select" name="role">
                    <option value="ADMIN">ADMIN</option>
                    <option value="MD">MD</option>
                    <option value="VIEWER">VIEWER</option>
                  </select>
                </div>
                <div class="col-4 d-grid">
                  <button class="btn btn-warning" type="submit">변경</button>
                </div>
              </form>
            </div>
          </div>

          <!-- 잠금 해제 -->
          <div class="card">
            <div class="card-body">
              <div class="fw-semibold mb-2">잠금 해제</div>
              <form method="post" th:action="@{|/admin/users/${userId}/unlock|}">
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                <button class="btn btn-success w-100" type="submit">잠금 해제 + 실패횟수 초기화</button>
              </form>
            </div>
          </div>

          <!-- 임시 비밀번호 초기화 -->
          <div class="card border-danger">
            <div class="card-body">
              <div class="fw-semibold mb-2 text-danger">임시 비밀번호 강제 초기화</div>
              <div class="text-muted small mb-2">임시 비밀번호는 처리 후 1회만 노출(예정)</div>
              <form method="post" th:action="@{|/admin/users/${userId}/reset-password|}"
                    onsubmit="return confirm('임시 비밀번호로 초기화합니다. 진행할까요?');">
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                <button class="btn btn-danger w-100" type="submit">임시 비밀번호 발급</button>
              </form>

              <div class="alert alert-info mt-3 mb-0" th:if="${param.resetDone}">
                임시 비밀번호 초기화가 완료되었습니다. (결과 화면은 다음 단계에서 표시)
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>
  </div>

</div>
</body>
</html>
