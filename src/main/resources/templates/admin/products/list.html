<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<body>
<div th:fragment="content">

  <form method="get" action="/admin/products" class="row g-2 align-items-end">
    <div class="col-12 col-md-4">
      <label class="form-label">키워드</label>
      <input class="form-control" name="q" placeholder="상품명/상품번호"
             th:value="${q}">
    </div>

    <div class="col-12 col-md-3">
      <label class="form-label">카테고리</label>
      <select class="form-select" name="categoryId">
        <option value="">전체</option>
        <!-- TODO: 카테고리 데이터 붙이면 option 렌더링 -->
      </select>
    </div>

    <div class="col-12 col-md-2">
      <label class="form-label">상태</label>
      <select class="form-select" name="status">
        <option value="" th:selected="${status == null or status == ''}">전체</option>
        <option value="ACTIVE" th:selected="${status == 'ACTIVE'}">판매중</option>
        <option value="INACTIVE" th:selected="${status == 'INACTIVE'}">판매중지</option>
      </select>
    </div>

    <div class="col-12 col-md-2">
      <label class="form-label">정렬</label>
      <select class="form-select" name="sort">
        <option value="CREATED_DESC" th:selected="${sort == 'CREATED_DESC'}">최신순</option>
        <option value="PRICE_ASC" th:selected="${sort == 'PRICE_ASC'}">가격↑</option>
        <option value="PRICE_DESC" th:selected="${sort == 'PRICE_DESC'}">가격↓</option>
      </select>
    </div>

    <div class="col-12 col-md-1 d-grid">
      <button class="btn btn-primary" type="submit">검색</button>
    </div>
  </form>

  <div class="d-flex justify-content-between align-items-center mt-3">
    <div class="text-muted small">검색 결과는 데이터 연결 후 표시</div>
    <a class="btn btn-success btn-sm" href="/admin/products/new">상품 등록</a>
  </div>

  <hr class="my-3"/>

  <div class="table-responsive">
    <table class="table table-sm table-striped align-middle">
      <thead>
      <tr>
        <th>ID</th>
        <th>상품번호</th>
        <th>상품명</th>
        <th>카테고리</th>
        <th class="text-end">가격</th>
        <th class="text-end">재고</th>
        <th>상태</th>
        <th class="text-end">관리</th>
      </tr>
      </thead>

      <tbody>
      <!-- 더미 1 -->
      <tr>
        <td>1</td>
        <td>SKU-0001</td>
        <td>테스트 상품</td>
        <td>-</td>
        <td class="text-end">10000</td>
        <td class="text-end">50</td>
        <td><span class="badge text-bg-success">ACTIVE</span></td>
        <td class="text-end">
          <a class="btn btn-outline-secondary btn-sm" href="/admin/products/1/edit">수정</a>

          <form method="post" action="/admin/products/1/inactivate" class="d-inline"
                onsubmit="return confirm('판매중지 처리합니다. 진행할까요?');">
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
            <button class="btn btn-outline-warning btn-sm" type="submit">판매중지</button>
          </form>

          <form method="post" action="/admin/products/1/delete" class="d-inline"
                onsubmit="return confirm('삭제(상태변경) 처리합니다. 진행할까요?');">
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
            <button class="btn btn-outline-danger btn-sm" type="submit">삭제</button>
          </form>
        </td>
      </tr>

      <!-- 데이터 없을 때 -->
      <!--
      <tr>
        <td colspan="8" class="text-center text-muted">데이터 없음</td>
      </tr>
      -->
      </tbody>
    </table>
    <nav aria-label="Page navigation" class="mt-3">
      <ul class="pagination pagination-sm justify-content-center mb-0">
        <li class="page-item disabled"><a class="page-link" href="#">이전</a></li>
        <li class="page-item active"><a class="page-link" href="#">1</a></li>
        <li class="page-item"><a class="page-link" href="#">2</a></li>
        <li class="page-item"><a class="page-link" href="#">3</a></li>
        <li class="page-item"><a class="page-link" href="#">다음</a></li>
      </ul>
    </nav>
  </div>

</div>
</body>
</html>
